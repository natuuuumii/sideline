<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>BTC SIDELINE【64ボタン版】</title>
  <link rel="icon" type="image/png" href="images/favicon.jpeg" />
  <link rel="apple-touch-icon" href="images/favicon.jpeg" />
  <style>
    :root {
      --bg: #f0f8ff;
      --btn: #3d6aad;
      --btn-alt: #71b4c7;
      --btn-alt2: #74c4c0;
      --btn-text: #fff;
      --playing: #d1ecf1;
      --border: rgba(0,0,0,0.08);
    }

    * { box-sizing: border-box; }

    body {
      font-family: Arial, system-ui, -apple-system, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      background-color: var(--bg);
      margin: 0;
      padding: 16px;
      color: #123;
    }

    .page-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
    .home-link { color: #3d6aad; text-decoration: none; font-weight: bold; }
    .home-link:hover { text-decoration: underline; }

    h3 { text-align: center; margin: 10px 0 16px; }

    #currentTrack { text-align: center; margin: 10px 0 6px; font-size: 15px; }

    audio { display: block; width: min(760px, 94vw); margin: 8px auto 18px; }

    /* グリッド: PCは8×8、タブレットは6列、スマホは4列 */
    .grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 8px;
      width: min(820px, 96vw);
      margin: 0 auto;
    }
    @media (max-width: 980px) { .grid { grid-template-columns: repeat(6, 1fr); } }
    @media (max-width: 680px) { .grid { grid-template-columns: repeat(4, 1fr); } }

    .sound-btn {
      appearance: none;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--btn);
      color: var(--btn-text);
      padding: 10px 8px;
      min-height: 48px;
      font-size: 14px;
      line-height: 1.2;
      cursor: pointer;
      transition: transform .04s ease, opacity .2s ease, box-shadow .2s ease;
      word-break: break-word;
    }
    .sound-btn:hover { opacity: .92; }
    .sound-btn:active { transform: translateY(1px); }
    .sound-btn.alt { background: var(--btn-alt); }
    .sound-btn.alt2 { background: var(--btn-alt2); }
    .sound-btn.playing { outline: 3px solid var(--playing); box-shadow: 0 0 0 2px #fff inset; }
    .sound-btn[disabled] { cursor: not-allowed; opacity: .55; filter: grayscale(.2); }

    .legend { width: min(820px, 96vw); margin: 14px auto 0; font-size: 12px; color: #456; }
    .legend code { background: #fff; padding: 2px 6px; border-radius: 6px; border: 1px solid var(--border); }
  </style>
</head>
<body>
  <header class="page-header">
    <a href="index.html" class="home-link">🏠 TOPページに戻る</a>
    <span style="opacity:.6;font-size:12px">/ 64 Button Soundboard</span>
  </header>

  <h3>🎵 BTC SIDELINE【その他｜64ボタン】</h3>

  <div id="currentTrack">再生中: なし</div>
  <!-- 既存ページの audioPlayer を流用 -->
  <audio id="audioPlayer" controls></audio>

  <!-- 8×8＝64ボタンを自動生成 -->
  <div id="grid" class="grid" aria-label="サウンドボード 64ボタン"></div>

  <p class="legend">
    🔧 未割り当てのボタンはグレー表示になります。曲を割り当てるには <code>tracks[i].src</code> にファイルパスを入れてください。
  </p>

<script>
  // --- 設定ここから -------------------------------------------------------
  // 64スロット分のトラックを定義。label=ボタン表示名、src=ファイルパス。
  // 既存の9曲を先頭に入れ、残りは未割り当て（src: ""）で作ってあります。
  const tracks = [
    { label: "オープニング2025春", src: "music/オープニング2025春.mp3" },
    { label: "◆2024 花道_ When Legends Rise", src: "music/◆2024 花道_ When Legends Rise.mp3" },
    { label: "", src: "" },
    { label: "★キックオフ _ Joker", src: "music/★キックオフ _ Joker.mp3" },
    { label: "★キックオフ _ Rage", src: "music/★キックオフ _ Rage.mp3" },
    { label: "BTオハコ _ イナヅマダンス", src: "music/BTオハコ _ イナヅマダンス.mp3" },
    { label: "春ハーフ【Been like this】", src: "music/春ハーフ【Been like this】 .mp3" },
    { label: "◆ハーフ【SAX】", src: "music/◆ハーフ【SAX】.mp3" },
    { label: "ハーフ後BTダンス", src: "music/ハーフ後BTダンス.mp3" },
    // ここから先は必要に応じてファイルを追記してください（合計64）
  ];

  // 64個に満たない場合は未割り当てスロットで埋める
  while (tracks.length < 64) {
    const idx = tracks.length + 1;
    tracks.push({ label: `未割り当て ${idx}`, src: "" });
  }

  // --- UI生成 --------------------------------------------------------------
  const grid = document.getElementById('grid');
  const audio = document.getElementById('audioPlayer');
  const currentLabel = document.getElementById('currentTrack');

  let currentIdx = -1;

  function renderButtons() {
    grid.innerHTML = '';

    tracks.forEach((t, i) => {
      const btn = document.createElement('button');
      btn.className = 'sound-btn';

      // 2,3列目だけ色替えなど好みで（視認性UP）
      if (i % 8 === 1) btn.classList.add('alt');
      if (i % 8 === 2) btn.classList.add('alt2');

      btn.id = `btn-${i}`;
      btn.type = 'button';
      btn.setAttribute('aria-label', t.label || `ボタン ${i+1}`);
      btn.textContent = t.label || `ボタン ${i+1}`;

      if (!t.src) {
        btn.disabled = true;
        btn.title = '未割り当て';
      } else {
        btn.addEventListener('click', () => playIndex(i));
      }

      grid.appendChild(btn);
    });
  }

  function playIndex(i) {
    const track = tracks[i];
    if (!track || !track.src) return;

    // 再生中ハイライトのリセット
    if (currentIdx >= 0) {
      const prev = document.getElementById(`btn-${currentIdx}`);
      prev && prev.classList.remove('playing');
    }

    currentIdx = i;

    audio.src = track.src;
    audio.play().catch(err => {
      console.error('再生エラー:', err);
    });

    const nowBtn = document.getElementById(`btn-${i}`);
    nowBtn && nowBtn.classList.add('playing');

    const fileName = decodeURIComponent(track.src.split('/').pop());
    currentLabel.textContent = `再生中: ${fileName}`;
  }

  // 曲が終わったらハイライトを外す（またはそのままでもOK）
  audio.addEventListener('ended', () => {
    const nowBtn = document.getElementById(`btn-${currentIdx}`);
    nowBtn && nowBtn.classList.remove('playing');
    currentIdx = -1;
    currentLabel.textContent = '再生中: なし';
  });

  // 初期化
  renderButtons();
</script>
</body>
</html>
